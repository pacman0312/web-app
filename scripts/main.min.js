const touchScreen=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),app=document.getElementById("app"),windowWidth=window.innerWidth,breakpointWidth=500,hideAppLog="-- Hide app",showAppLog="-- Show app",contentApp={main:{goods:{title:"Выбирай и готовь!",seeAll:"see all"}},form:{title:"Необходимые продукты",everything:"все",nothing:"ничего"}},hideApp=()=>{app.style.transition="all .3s ease 0s",app.style.opacity="0",app.style.visibility="hidden",console.log(hideAppLog)},showApp=()=>{app.style.opacity="1",app.style.visibility="visible",console.log(showAppLog)},resizeApp=(e,n)=>{windowWidth>500?e():n()},appGetData=async e=>{const n=await fetch(e);if(!n.ok)throw new Error(`in url: ${n.url} Status: ${n.status}`);return await n.json()},createElements=(e,n,o,t)=>{const s=document.createElement(n);return s.className=o,e.insertAdjacentElement(t,s),s},createAppTouch=(e,n,o,t,s)=>n(e,o,t,s),createAppTouchMain=(e,n,o,t,s,i)=>{const a=n(e,o,t,s),c=`\n        <div class="app-touch-main__scroll">\n            <section class="app-touch-main__section app-touch-main__section_screen">\n                <div class="app-touch-main__parallax"></div>\n                <div class="app-touch-main__look">\n                    Look\n                </div>\n            </section>\n            <section class="app-touch-main__section app-touch-main__section_goods">\n                <h1 class="app-touch-title app-touch-title_goods">${i.goods.title}</h1>\n                <div class="app-touch-main__goods goods">\n                    <div class="goods__see-all">\n                        <span id="see-all-goods">${i.goods.seeAll}</span>\n                    </div>\n                    <div class="goods__wrap-scroll">\n                        <div class="goods__scroll after"></div>\n                    </div>\n                </div>\n            </section>\n        </div>\n    `;return a.insertAdjacentHTML(s,c),a},createAppTouchGoods=(e,n,o,t,s)=>n(e,o,t,s),createAppTouchForm=(e,n,o,t,s,i)=>{const a=n(e,o,t,s),c=`\n        <div class="app-touch-form__close"></div>\n        <div class="app-touch-form__wrap-form">\n            <div class="app-touch-form__swipe"></div>\n            <form action="#" id="form" class="form">\n                <input class="form__name" type="text" name="name" value="">\n                <div class="form__title">\n                    <h2>${i.title}</h2>\n                </div>\n                <div class="form__ingredients"></div>\n                <div class="form__btn">\n                    <button class="form__btn-submit cursor-none" type="submit">Отправить</button>\n                </div>\n            </form>\n        </div>\n    `;return a.insertAdjacentHTML(s,c),a},openForm=(e,n,o,t,s,i,a)=>{o.setAttribute("value",s);const c=i.split(", ");for(const e of c)t.insertAdjacentHTML("beforeend",`\n            <div class="form__ingredient-el">\n                <span class="form__ingredient-chec"></span>\n                <span class="form__ingredient-name">${e}</span>\n            </div>\n        `);t.insertAdjacentHTML("beforeend",`\n        <div class="form__ingredient-el">\n            <span class="form__ingredient-chec"></span>\n            <span class="form__ingredient-name">${a.everything}</span>\n        </div>\n        <div class="form__ingredient-el">\n            <span class="form__ingredient-chec"></span>\n            <span class="form__ingredient-name">${a.nothing}</span>\n        </div>\n    `),e.style.opacity="1",e.style.visibility="visible",setTimeout(()=>{n.style.transform="translateY(0%)"},300);const l=document.querySelectorAll(".form__ingredient-el");let d=[];for(const e of l){const n=e.children[0],o=e.children[1].textContent;e.addEventListener("click",(function(){if(n.classList.toggle("active"),n.classList.contains("active"))d.push(o);else{const e=d.find(e=>e===o);e&&d.splice(d.indexOf(e),1)}console.log(d)}),!1)}},closeForm=(e,n,o,t)=>{n.style.transform="translateY(100%)",setTimeout(()=>{e.style.opacity="0",e.style.visibility="hidden",setTimeout(()=>{o.setAttribute("value",""),t.textContent=""},100)},300)},appLog=(e,n,o,t)=>{console.log(e),console.log(n),console.log(o),console.log(t)},appTouch=(e,n,o,t,s,i,a,c)=>{e(hideApp,showApp),appGetData("./db/goods.json").then(e=>{e.forEach(e=>{const{id:n,name:o,nameMin:t,img:s,ingredients:i,category:a,time:c,main:l}=e,d=`\n                <div class="good" data-name="${o}" data-ingredients="${i}">\n                    <div class="good__content">\n                        <div class="good__wrap-img">\n                            <img src="${s}" alt="good-img-${n}" class="good__img">\n                            <span class="good__time">${c}</span>\n                        </div>\n                        <div class="good__wrap-text">\n                            <div class="good__name">${o}</div>\n                        </div>\n                    </div>\n                </div>\n            `;""!==l?(console.log(":: In main"),m.insertAdjacentHTML("beforeend",d)):console.log(":: Not in main")})});const l=o(app,n,"div","app-touch","beforeend"),d=t(l,n,"main","app-touch-main","beforeend",contentApp.main),r=s(l,n,"div","app-touch-good","beforeend"),p=i(l,n,"div","app-touch-form","beforeend",contentApp.form),m=document.querySelector(".goods__scroll"),_=p.children[0],u=p.children[1],h=u.children[0],g=document.querySelector(".form__name"),v=document.querySelector(".form__ingredients");let f=null,A=null;var y,b,w,L;y=l,b=d,w=r,L=p,console.log(y),console.log(b),console.log(w),console.log(L),m.addEventListener("click",(function(e){const n=e.target.closest(".good");if(n){const e=n.dataset.name.split(" <br> ").join(" "),o=n.dataset.ingredients;a(p,u,g,v,e,o,contentApp.form)}}),!1),_.addEventListener("click",(function(){c(p,u,g,v)}),!1),h.addEventListener("touchstart",(function(e){const n=e.touches[0];f=n.clientX,A=n.clientY}),!1),h.addEventListener("touchmove",(function(e){if(!f||!A)return!1;const n=e.touches[0];let o=n.clientX,t=n.clientY,s=o-f,i=t-A;return Math.abs(i)>Math.abs(s)?(i>0&&c(p,u,g,v),!1):void 0}),!1),window.addEventListener("resize",(function(e){window.innerWidth>500?hideApp():showApp()}))},appDesktop=()=>console.log("desktop");touchScreen?appTouch(resizeApp,createElements,createAppTouch,createAppTouchMain,createAppTouchGoods,createAppTouchForm,openForm,closeForm):console.log("desktop");