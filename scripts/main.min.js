const touchScreen=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),app=document.getElementById("app"),windowWidth=window.innerWidth,breakpointWidth=500,hideAppLog="-- Hide app",showAppLog="-- Show app",contentApp={main:{goods:{title:"Выбирай и готовь!",seeAll:"все"}},form:{title:"Необходимые продукты",nothing:"все есть"}},hideApp=()=>{app.style.transition="all .3s ease 0s",app.style.opacity="0",app.style.visibility="hidden",console.log(hideAppLog)},showApp=()=>{app.style.opacity="1",app.style.visibility="visible",console.log(showAppLog)},resizeApp=(e,n)=>{windowWidth>500?e():n()},appBack=(e,n,o)=>{e.insertAdjacentHTML("beforeend",`\n        <div class="app-touch-back">\n            <div class="app-touch-back__wrap">\n                <div class="app-touch-back__icon">${n}</div>\n                <h2 class="app-touch-back__title">${o}</h2>\n            </div>\n        </div>\n    `)},appGetData=async e=>{const n=await fetch(e);if(!n.ok)throw new Error(`in url: ${n.url} Status: ${n.status}`);return await n.json()},createElements=(e,n,o,t)=>{const s=document.createElement(n);return s.className=o,e.insertAdjacentElement(t,s),s},createAppTouch=(e,n,o,t,s)=>n(e,o,t,s),createAppTouchMain=(e,n,o,t,s,i)=>{const a=n(e,o,t,s),c=`\n        <div class="app-touch-main__scroll">\n            <section class="app-touch-main__section app-touch-main__section_screen">\n                <div class="app-touch-main__parallax"></div>\n                <div class="app-touch-main__look">\n                    Look\n                </div>\n            </section>\n            <section class="app-touch-main__section app-touch-main__section_goods">\n                <h1 class="app-touch-title app-touch-title_goods">${i.goods.title}</h1>\n                <div class="app-touch-main__goods goods">\n                    <div class="goods__see-all">\n                        <span id="see-all-goods">${i.goods.seeAll}</span>\n                    </div>\n                    <div class="goods__wrap-scroll">\n                        <div class="goods__scroll after"></div>\n                    </div>\n                </div>\n            </section>\n        </div>\n    `;return a.insertAdjacentHTML(s,c),a},createAppTouchGoods=(e,n,o,t,s)=>{const i=n(e,o,t,s);return i.insertAdjacentHTML(s,'<div class="app-touch-good__scroll"></div>'),i},createAppTouchForm=(e,n,o,t,s,i)=>{const a=n(e,o,t,s),c=`\n        <div class="app-touch-form__close"></div>\n        <div class="app-touch-form__wrap-form">\n            <div class="app-touch-form__swipe"></div>\n            <form action="#" id="form" class="form">\n                <input class="form__name-submit" type="text" name="name" value="">\n                <input class="form__ingredients-submit" type="text" name="ingredients" value="">\n                <div class="form__title">\n                    <h2>${i.title}</h2>\n                </div>\n                <div class="form__ingredients"></div>\n                <div class="form__btn">\n                    <button class="form__btn-submit cursor-none" type="submit">Отправить</button>\n                </div>\n            </form>\n        </div>\n    `;return a.insertAdjacentHTML(s,c),a},openForm=(e,n,o,t,s,i,a,c)=>{o.setAttribute("value",i);const d=a.split(", ");for(const e of d)s.insertAdjacentHTML("beforeend",`\n            <div class="form__ingredient-el">\n                <span class="form__ingredient-chec"></span>\n                <span class="form__ingredient-name">${e}</span>\n            </div>\n        `);s.insertAdjacentHTML("beforeend",`\n        <div class="form__ingredient-el nothing">\n            <span class="form__ingredient-chec"></span>\n            <span class="form__ingredient-name">${c.nothing}</span>\n        </div>\n    `),e.classList.add("active"),setTimeout(()=>{n.classList.add("active")},300);const r=document.querySelectorAll(".form__ingredient-el"),l=document.querySelector(".form__ingredient-el.nothing");let p=[];for(const e of r){const n=e.children[1].textContent;e.addEventListener("click",(function(){if(this.classList.toggle("active"),e.classList.contains("active"))if(e.classList.add("active"),n===c.nothing){p=[];for(const e of r)e.classList.remove("active");l.classList.add("active"),p.push(l.children[1].textContent)}else{l.classList.remove("active");const e=p.find(e=>e===c.nothing);e&&p.splice(p.indexOf(e),1),p.push(n)}else if(e.classList.remove("active"),n===c.nothing)p=[];else{const e=p.find(e=>e===n);e&&p.splice(p.indexOf(e),1)}t.setAttribute("value",p.join(", "))}))}},closeForm=(e,n,o,t,s)=>{n.classList.remove("active"),setTimeout(()=>{e.classList.remove("active"),setTimeout(()=>{o.setAttribute("value",""),t.setAttribute("value",""),s.textContent=""},100)},300)},goodsCreateContent=e=>{const n=document.querySelector(".app-touch-good__scroll");e(n,"icon","Выбирай и готовь!"),n.insertAdjacentHTML("beforeend",'\n        <section class="app-touch-good__categories">\n            <div class="app-touch-good__categories-scroll"></div>\n        </section>\n        <section class="app-touch-good__goods">\n            <div class="app-touch-good__goods-wrap"></div>\n        </section>\n    ');const o=document.querySelector(".app-touch-good__categories-scroll"),t=document.querySelector(".app-touch-good__goods-wrap");appGetData("./db/categories.json").then(e=>{e.forEach(e=>{o.insertAdjacentHTML("beforeend",`<div class="app-touch-good__categories-el" data-filter="${e.name}">\n                <span>${e.name}</span>\n            </div>`)})}),appGetData("./db/goods.json").then(e=>{e.forEach(e=>{const{id:n,name:o,nameMin:s,img:i,ingredients:a,category:c,time:d,main:r}=e;t.insertAdjacentHTML("beforeend",`\n                <div class="good" data-name="${o}" data-ingredients="${a}">\n                    <div class="good__content">\n                        <div class="good__wrap-img">\n                            <img src="${i}" alt="good-img-${n}" class="good__img">\n                            <span class="good__time">${d}</span>\n                        </div>\n                        <div class="good__wrap-text">\n                            <div class="good__name">${o}</div>\n                        </div>\n                    </div>\n                </div>\n            `)})})},appLog=(e,n,o,t)=>{console.log(e),console.log(n),console.log(o),console.log(t)},appTouch=(e,n,o,t,s,i,a,c,d)=>{e(hideApp,showApp),appGetData("./db/goods.json").then(e=>{e.forEach(e=>{const{id:n,name:o,nameMin:t,img:s,ingredients:i,category:a,time:c,main:d}=e,r=`\n                <div class="good" data-name="${o}" data-ingredients="${i}">\n                    <div class="good__content">\n                        <div class="good__wrap-img">\n                            <img src="${s}" alt="good-img-${n}" class="good__img">\n                            <span class="good__time">${c}</span>\n                        </div>\n                        <div class="good__wrap-text">\n                            <div class="good__name">${o}</div>\n                        </div>\n                    </div>\n                </div>\n            `;""!==d?(console.log(":: In main"),_.insertAdjacentHTML("beforeend",r)):console.log(":: Not in main")})});const r=t(app,o,"div","app-touch","beforeend"),l=s(r,o,"main","app-touch-main","beforeend",contentApp.main),p=i(r,o,"div","app-touch-good","beforeend"),m=a(r,o,"div","app-touch-form","beforeend",contentApp.form),_=document.querySelector(".goods__scroll"),u=document.querySelector(".app-touch-main__section_goods"),g=m.children[0],v=m.children[1],h=v.children[0],f=document.querySelector(".form__name-submit"),A=document.querySelector(".form__ingredients-submit"),b=document.querySelector(".form__ingredients");let L=null,w=null;var y,T,$,k;y=r,T=l,$=p,k=m,console.log(y),console.log(T),console.log($),console.log(k),u.addEventListener("click",(function(e){e.target.closest("#see-all-goods")&&(p.classList.add("active"),setTimeout(()=>goodsCreateContent(n),500))}),!1),r.addEventListener("click",(function(e){const n=e.target.closest(".good");if(n){const e=n.dataset.name.split(" <br> ").join(" "),o=n.dataset.ingredients;c(m,v,f,A,b,e,o,contentApp.form)}})),g.addEventListener("click",(function(){d(m,v,f,A,b)}),!1),h.addEventListener("touchstart",(function(e){const n=e.touches[0];L=n.clientX,w=n.clientY}),!1),h.addEventListener("touchmove",(function(e){if(!L||!w)return!1;const n=e.touches[0];let o=n.clientX,t=n.clientY,s=o-L,i=t-w;return Math.abs(i)>Math.abs(s)?(i>0&&d(m,v,f,A,b),!1):void 0}),!1),window.addEventListener("resize",(function(e){window.innerWidth>500?hideApp():showApp()}))},appDesktop=()=>console.log("desktop");touchScreen?appTouch(resizeApp,appBack,createElements,createAppTouch,createAppTouchMain,createAppTouchGoods,createAppTouchForm,openForm,closeForm):console.log("desktop");